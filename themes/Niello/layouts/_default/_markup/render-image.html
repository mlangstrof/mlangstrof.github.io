{{- $image := .Page.Resources.GetMatch (printf "%s" (.Destination | safeURL)) -}}
<img
    src="{{ with $image }}{{ .RelPermalink }}{{ else }}{{ .Destination | safeURL }}{{ end }}"
    alt="{{ .Text }}"
    {{ with $image }}
    width="{{ .Width }}" height="{{ .Height }}"
    {{ end }}
    {{ with .Title }} style="display: block; margin: 0 auto; width: 100%; max-width: {{ . }};"{{ end }}
/>